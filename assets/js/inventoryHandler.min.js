function getUrlVars(){var e={};window.location.href.replace(/[?&]+([^=&]+)=([^&]*)/gi,(function(t,a,o){e[a]=o}));return e}function delet(e,t,a,o,i){alert([e,t,a,o,i].join(" | "))}function httpGet(e){return e.code=JSON.parse(localStorage.getItem("DazaiAPIData")).authToken,new Promise((function(t,a){const o=new XMLHttpRequest;o.open("POST","https://api.dazai.app/api/getInventory");o.setRequestHeader("Content-Type","application/json;charset=UTF-8"),o.onreadystatechange=e=>{4!=o.readyState&&"complete"!=o.readyState||t(o.responseText)},o.send(JSON.stringify(e))}))}function login(e){return new Promise((function(t,a){e.url="https://dazai.app/inventory/";const o=new XMLHttpRequest;o.open("POST","https://api.dazai.app/api/login");o.setRequestHeader("Content-Type","application/json;charset=UTF-8"),o.onreadystatechange=e=>{4!=o.readyState&&"complete"!=o.readyState||t(o.responseText)},console.log(e),o.send(JSON.stringify(e))}))}function setCust(e){const t=new XMLHttpRequest;t.open("POST","https://api.dazai.app/api/set-cust");t.setRequestHeader("Content-Type","application/json;charset=UTF-8"),t.onreadystatechange=e=>{if(4==t.readyState||"complete"==t.readyState){let e=JSON.parse(t.responseText);alert(e),e.includes("Set ")&&window.location.replace(window.location)}},t.send(JSON.stringify({code:JSON.parse(localStorage.getItem("DazaiAPIData")).authToken,item:e}))}function CapEach(e){let t=e.split(" ");return t=t.map(e=>e.split("")),t=t.map(e=>(e[0]=e[0].toUpperCase(),e.join(""))),t.join(" ")}async function yes(){var e=getUrlVars("code");if(localStorage.getItem("DazaiAPIData")||!e||e.code){if(!localStorage.getItem("DazaiAPIData")&&e&&e.code){let t=await login(e);localStorage.removeItem("DazaiAPIData"),localStorage.setItem("DazaiAPIData",t)}httpGet(e).then(e=>{const t=JSON.parse(e);if("relog"===t)return localStorage.clear(),window.location.replace("https://discord.com/api/oauth2/authorize?client_id=747901310749245561&redirect_uri=https%3A%2F%2Fdazai.app%2Finventory%2F&response_type=code&scope=identify%20email%20connections%20guilds");let a=t.allItems,o=document.getElementById("allInv");a=a.map(e=>{let a=t.inventory.map(e=>e.id);return console.log(a),e.amnt=a.filter(t=>(console.log(t,e.itemName,t.toLowerCase()===e.itemID.toLowerCase()),t.toLowerCase()===e.itemID.toLowerCase())).length,e.amnt=e.free||e.amnt,e});let i=450,n=a.filter(e=>e.isNumbered).sort((e,t)=>t.amnt-e.amnt);n.length>0&&(i+=25*n[0].amnt),a.sort((e,t)=>t.amnt-e.amnt);for(let e=0;e<Math.ceil(a.length/3);e++){let n='<div class="row align-items-center">';for(let o=3*e;o<3*e+3;o++){if(item=a[o],n=n+'<div class="col" style="opacity: '+(0!==item.amnt?1:.2)+';">',n+=`<div class="card" style="height: ${i}px;margin-top: 15px;margin-bottom: 15px;${t.currentBG===item.itemID.toLowerCase()||t.currentCS+"cs"===item.itemID.toLowerCase()?"background-color:rgb(9,9,9);":""}">                    <div class="card" ><img class="img-fluid card-img-top w-100 d-block" src="${item.image}" height="183"/></div>                    <div class="card-body">                    <p class="card-text" style="font-size: 12px;color: rgb(200,200,200);">x${item.amnt}</p>                    <p style="font-size: 12px;color: rgb(100,100,100);">id: <code>${item.itemID}</code></p>                    `,n+='<h4 class="card-title">'+item.itemName+'</h4>                        <h6 class="text-muted card-subtitle mb-2">'+CapEach(item.rarity).replace(/\_/g," ")+'</h6>                        <h6 class="text-muted card-subtitle mb-2"> Type: '+CapEach(item.type).replace(/\_/g," ")+'</h6>                        <p class="card-text">'+item.itemLore+"</p>",item.isNumbered){let e=[],a=t.inventory.filter(e=>e.id.toLowerCase()===item.itemID.toLowerCase());a.sort((e,t)=>(e.serial||0)-(t.serial||0));for(let t=0;t<a.length;t++)e.push("#"+(a[t].serial||"N/A")+" of "+item.currentNum);n+='<p class="card-text" style="font-size: 12px;color: rgb(200,200,200);">You Own :<br /><code>'+e.join("<br />")+"</code></p>"}"Color Scheme"!==item.type&&"Card Background"!==item.type||(t.currentBG===item.itemID.toLowerCase()||t.currentCS+"cs"===item.itemID.toLowerCase()?n+='<button class="btn btn-dark disabled" type="button">Selected</button>':item.amnt>0&&(n+=`<button class="btn btn-dark" type="button" onclick="setCust(&quot;${item.itemID}&quot;)">Set As Main</button>`)),n+="</div>                </div>            </div>"}n+="</div>",o.innerHTML+=n}})}else window.location.replace("https://discord.com/api/oauth2/authorize?client_id=747901310749245561&redirect_uri=https%3A%2F%2Fdazai.app%2Finventory%2F&response_type=code&scope=identify%20email%20connections%20guilds")}yes();