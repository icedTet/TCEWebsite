function getUrlVars(){var e={};window.location.href.replace(/[?&]+([^=&]+)=([^&]*)/gi,(function(t,n,o){e[n]=o}));return e}function delet(e,t,n,o,a){alert([e,t,n,o,a].join(" | "))}function httpGet(e){return e.code=JSON.parse(localStorage.getItem("DazaiAPIData")).authToken,new Promise((function(t,n){const o=new XMLHttpRequest;o.open("POST","https://api.dazai.app/api/getInventory");o.setRequestHeader("Content-Type","application/json;charset=UTF-8"),o.onreadystatechange=e=>{4!=o.readyState&&"complete"!=o.readyState||t(o.responseText)},o.send(JSON.stringify(e))}))}function login(e){return new Promise((function(t,n){e.url="https://dazai.app/inventory/";const o=new XMLHttpRequest;o.open("POST","https://api.dazai.app/api/login");o.setRequestHeader("Content-Type","application/json;charset=UTF-8"),o.onreadystatechange=e=>{4!=o.readyState&&"complete"!=o.readyState||t(o.responseText)},console.log(e),o.send(JSON.stringify(e))}))}function createTrade(){let e=document.getElementById("givegib"),t=document.getElementById("takey");if(0===e.childElementCount&&0===t.childElementCount)return alert("You cannot create a blank trade!");if(0===t.childElementCount&&!confirm("Are you sure you want to leave the return box blank (You are donating your offerings)?"))return;if(0===e.childElementCount&&!confirm("Are you sure you want to leave the offer box blank (You are asking for donations)?"))return;if(!confirm("Are you 100% Sure you would like to create the trade? You will lose access to the offered items for as long as the trade is on"))return;let n=new XMLHttpRequest;n.open("POST","https://api.dazai.app/api/create-trade");n.setRequestHeader("Content-Type","application/json;charset=UTF-8"),n.onreadystatechange=e=>{if(4==n.readyState||"complete"==n.readyState){let e=JSON.parse(n.responseText);if(e.failed)return void alert(e.reason);alert("Horray! Your trade is now live at : https://dazai.app/trade?id="+e.tradeID+" . I have also Dmed you a copy of this link! Share it to whomever you would like to trade with!"),e.pass&&window.location.replace("http://dazai.app/self/")}};let o=[];console.log(e.childNodes),e.childNodes.forEach(e=>o.push(e));let a=[];t.childNodes.forEach(e=>a.push(e)),o=o.map(e=>{let t;try{console.log("x.childNodes[0].childNodes[3].childNodes[10]",e.childNodes[0].childNodes[3].childNodes[12]),t=parseInt(e.childNodes[0].childNodes[3].childNodes[12].innerText.replace("Serial Number: ","")),isNaN(t)&&(t=void 0)}catch(e){}return t&&(t+=""),{id:e.id.split("-card-clone-give")[0],serial:t}}),a=a.map(e=>({id:e.id.split("-card-clone-take")[0]})),n.send(JSON.stringify({code:JSON.parse(localStorage.getItem("DazaiAPIData")).authToken,give:o,want:a,anon:document.getElementById("checkAnon").checked}))}async function removeItem(e){if("givegib"===e.parentElement.parentElement.parentElement.parentElement.id){let t=document.getElementById(e.parentElement.parentElement.parentElement.id.split("-clone")[0]);t.childNodes[0].childNodes[1].childNodes[0],t.childNodes[0].children[1].children[0].innerText="x"+(parseInt(t.childNodes[0].children[1].children[0].innerText.replace("x",""))+1),t.style="opacity: 1.0"}let t=document.getElementById("givegib"),n=document.getElementById("takey");e.parentElement.parentElement.parentElement.remove(),0===t.childElementCount&&0===n.childElementCount&&(document.getElementById("create-trade").style="background: rgb(24,24,24);border-radius: 9px;border-width: 0px;display:none;",document.getElementById("checkboxx").style="display:none;")}function CapEach(e){let t=e.split(" ");return t=t.map(e=>e.split("")),t=t.map(e=>(e[0]=e[0].toUpperCase(),e.join(""))),t.join(" ")}async function addToOffer(e,t){let n=document.getElementById("givegib"),o=(document.getElementById("takey"),document.getElementById("giveAwayTitle")),a=document.getElementById("TakeTitle").child,r=t.parentElement.children[0].innerText.replace("x","")-1;if(r<0)return;if(t.parentElement.children[0].innerText="x"+r,n.childElementCount>5)return void alert("You can only give away a maximum of 6 items per side!");0==r&&(t.parentElement.parentElement.parentElement.style="opacity: 0.2");let i=document.getElementById(e).cloneNode(!0);if(i.innerHTML=i.innerHTML.replace('<button class="btn btn-primary ffs" type="button" style="background: rgb(50,50,50);margin-top:25px;"','<button class="btn btn-primary ffs" type="button" style="display:none"').replace('style="margin-left: 20px;margin-top:25px;background: rgb(143,93,95);"','style="display: none;"').replace('style="font-size: 12px;color: rgb(200,200,200);"','style="display:none"'),i.style="opacity: 1.0",i.id+="-clone-give",i.innerHTML.includes('<p class="card-text" style="font-size: 12px;color: rgb(200,200,200);">You Own :<br><code>#')){let t=i.innerHTML.split('<p class="card-text" style="font-size: 12px;color: rgb(200,200,200);">You Own :<br><code>#')[1].split("</code></p>")[0].split("<br>").map(e=>e.replace(/\#/g,"").split(" ")[0]);console.log(t);let n=prompt("Please enter which serial number you would like to offer (Possible Options : "+t.join(" , ")+"):","");for(;!t.includes(n)&&n&&""!==n;)console.log(n),n=prompt("I don't think you have that serial number! Please enter which serial number you would like to offer (Possible Options : "+t.join(" , ")+"):","");if(!n||""===n)return;try{let e='<p class="card-text" style="font-size: 12px;color: rgb(200,200,200);">You Own :<br><code>#'+i.innerHTML.split('<p class="card-text" style="font-size: 12px;color: rgb(200,200,200);">You Own :<br><code>#')[1].split("</code></p>")[0]+"</code></p>";i.innerHTML=i.innerHTML.replace(e,"")}catch(e){}i.childNodes[0].childNodes[3].innerHTML+='<br><p class="card-text" style="font-size: 20px;color: rgb(200,200,200);" id="'+e+'-serial1">Serial Number: '+n+"</p>",console.log(i.childNodes[0].childNodes[3])}i.childNodes[0].childNodes[3].innerHTML+='<br><p style="font-size: 24px;color: rgb(200,200,200);" id="'+e+'-quant-give">Quantity : 1</p><button class="btn btn-primary ffs" type="button" style="background: rgb(200,50,50);margin:0px;border-radius: 5px;border-width: 0px;margin-left:-1px" onclick="removeItem(this)">Remove Item</button>',n.append(i),document.getElementById("checkboxx").style="",document.getElementById("create-trade").style="background: rgb(24,24,24);border-radius: 9px;border-width: 0px;",o.style="text-align: left;margin-top: 0px;font-family: Catamaran, sans-serif;font-size: 32px;padding-left: 20px;",a.style="text-align: left;margin-top: 15px;font-family: Catamaran, sans-serif;font-size: 32px;padding-left: 20px;"}async function addToWant(e){document.getElementById("givegib");let t=document.getElementById("takey"),n=document.getElementById("giveAwayTitle"),o=document.getElementById("TakeTitle");if(document.getElementById("create-trade").style="background: rgb(24,24,24);border-radius: 9px;border-width: 0px;display:block;",t.childElementCount>5)return void alert("You can only accept a maximum of 6 items per side!");let a=document.getElementById(e).cloneNode(!0);a.id+="-clone-take";try{let e='<p class="card-text" style="font-size: 12px;color: rgb(200,200,200);">You Own :<br><code>#'+a.innerHTML.split('<p class="card-text" style="font-size: 12px;color: rgb(200,200,200);">You Own :<br><code>#')[1].split("</code></p>")[0]+"</code></p>";a.innerHTML=a.innerHTML.replace(e,"")}catch(e){}a.innerHTML=a.innerHTML.replace('style="background: rgb(50,50,50);margin-top:25px;"','style="display: none;"').replace('style="margin-left: 20px;margin-top:25px;background: rgb(143,93,95);"','style="display: none;"').replace('style="font-size: 12px;color: rgb(200,200,200);"','style="display:none"'),a.style="opacity: 1.0",a.childNodes[0].childNodes[3].innerHTML+='<br><p style="font-size: 24px;color: rgb(200,200,200);" id="'+e+'-quant-want">Quantity : 1</p><button class="btn btn-primary ffs" type="button" style="background: rgb(200,50,50);margin:0px;border-radius: 5px;border-width: 0px;margin-left:-1px" onclick="removeItem(this)">Remove Item</button>',t.append(a),document.getElementById("checkboxx").style="",document.getElementById("create-trade").style="background: rgb(24,24,24);border-radius: 9px;border-width: 0px;",n.style="text-align: left;margin-top: 0px;font-family: Catamaran, sans-serif;font-size: 32px;padding-left: 20px;",o.style="text-align: left;margin-top: 15px;font-family: Catamaran, sans-serif;font-size: 32px;padding-left: 20px;"}async function yes(){var e=getUrlVars("code");if(localStorage.getItem("DazaiAPIData")||!e||e.code){if(!localStorage.getItem("DazaiAPIData")&&e&&e.code){let t=await login(e);localStorage.removeItem("DazaiAPIData"),localStorage.setItem("DazaiAPIData",t)}httpGet(e).then(e=>{if("relog"===e)return localStorage.clear(),window.location.replace("https://discord.com/api/oauth2/authorize?client_id=747901310749245561&redirect_uri=https%3A%2F%2Fdazai.app%2Finventory%2F&response_type=code&scope=identify%20email%20connections%20guilds");const t=JSON.parse(e);console.warn(t,"a");let n=t.allItems,o=document.getElementById("allInv");n=n.map(e=>{let n=t.inventory.map(e=>e.id);return console.log(n),e.amnt=n.filter(t=>t.toLowerCase()===e.itemID.toLowerCase()).length,1==e.isTradeable?e:null}),n=n.filter(e=>!!e);let a=450,r=n.filter(e=>e.isNumbered).sort((e,t)=>t.amnt-e.amnt);r.length>0&&(a+=25*r[0].amnt),n.sort((e,t)=>t.amnt-e.amnt);for(let e=0;e<Math.ceil(n.length/3);e++){let r='<div class="row align-items-center">';for(let o=3*e;o<3*e+3;o++)if(item=n[o],item.isTradeable){if(r=r+'<div class="col" style="opacity: '+(0!==item.amnt?1:.2)+';" id= "'+item.itemID+'-card">',r+='<div class="card" style="height: '+a+'px;margin-top: 15px;margin-bottom: 15px;">                    <div class="card" ><img class="card-img-top w-100 d-block" src="'+item.image+'" /></div>                    <div class="card-body">                    <p class="card-text" style="font-size: 12px;color: rgb(200,200,200);">x'+item.amnt+'</p>                    <p style="font-size: 12px;color: rgb(100,100,100);">id: <code>'+item.itemID+"</code></p>",r+='<h4 class="card-title">'+item.itemName+'</h4>                        <h6 class="text-muted card-subtitle mb-2">'+CapEach(item.rarity).replace(/\_/g," ")+'</h6>                        <p class="card-text">'+item.itemLore+"</p>",item.isNumbered){let e=[],n=t.inventory.filter(e=>e.id.toLowerCase()===item.itemID.toLowerCase());n.sort((e,t)=>(e.serial||0)-(t.serial||0));for(let t=0;t<n.length;t++)e.push("#"+(n[t].serial||"N/A")+" of "+item.currentNum);r+='<p class="card-text" style="font-size: 12px;color: rgb(200,200,200);">You Own :<br /><code>'+e.join("<br />")+"</code></p>"}0!=item.amnt&&(r+='<button class="btn btn-primary ffs" type="button" style="background: rgb(50,50,50);margin-top:25px;" onClick= addToOffer("'+item.itemID+'-card",this)>Offer</button>'),r+='<button class="btn btn-primary ffs" type="button" style="margin-left: 20px;margin-top:25px;background: rgb(143,93,95);" onClick= addToWant("'+item.itemID+'-card")>recieve</button>',r+="</div>                </div>            </div>"}r+="</div>",o.innerHTML+=r}})}else window.location.replace("https://discord.com/api/oauth2/authorize?client_id=747901310749245561&redirect_uri=https%3A%2F%2Fdazai.app%2Finventory%2F&response_type=code&scope=identify%20email%20connections%20guilds")}yes();